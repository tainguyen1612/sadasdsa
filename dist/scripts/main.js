"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}window.onload=function(){var t,r=null,c=null;(t=new XMLHttpRequest).onreadystatechange=function(){var t,n;4==this.readyState&&200==this.status&&(r=JSON.parse(this.responseText),i=(e=localStorage.getItem("data"))?JSON.parse(e):[],p(r),t=document.querySelector("#flush-collapseOne > ul"),n=r.filter(function(n,t){return t===r.findIndex(function(t){return t.type===n.type})}),t&&(t.innerHTML=n.map(function(t){return"<li> "+t.type+" </li>"}).join("")),function(){var t=document.querySelectorAll("#flush-collapseOne li");t&&t.forEach(function(n){n.onclick=function(){m.value="0";var t=document.querySelector(".activeClick");null!==t&&t.classList.remove("activeClick"),n.classList.add("activeClick"),p(c=r.filter(function(t){return t.type===n.innerText})),y()}})}(),h(),g(),y())},t.open("GET","http://localhost:3000/product",!0),t.send();var a=0,i=[],e=void 0,o=6,l=1,u=0,s=o,d=void 0;function p(t){var n,e=document.querySelector(".list__row"),t=t.map(function(t,n){if(u<=n&&n<s)return'<div class="col-lg-4 col-md-6 d-none d-lg-block">\n                            <div class="card">\n                                <img class="card-img-top" alt="khong co anh" src='+t.img+' />\n                                <div class="card-body">\n                                    <h5 class="card-title">'+t.name+'</h5>\n                                    <h3 class="card-text">'+t.type+'</h3>\n                                    <h3 class="card-text"><span class="me-2">'+t.price+'đ</span><span class="products__hover">450.000đ</span></h3>\n                                </div>\n                                <div class="card-footer">\n                                    <a class="btn btn-outline-dark" href="/detail.html">MUA HÀNG</a><a class="btn btn-outline-dark cart__add" data-id="'+t.id+'"><i class="fa fa-heart"></i></a><a class="btn btn-outline-dark" href="#"><i class="fa fa-sync"></i></a>\n                                </div>\n                            </div>\n                        </div>'});e&&(e.innerHTML=t.join("")),e=document.querySelectorAll(".cart__add"),t=document.querySelector(".fa-shopping-cart > span"),n=createNotification({closeOnClick:!0,displayCloseButton:!1,positionClass:"nfc-top-right",onclick:!1,showDuration:3500,theme:"success"}),e.forEach(function(t){t&&(t.onclick=function(t){a=parseInt(t.currentTarget.getAttribute("data-id")),0===i.length||i.every(function(t){return t.id!==r[a-1].id})?i.push(r[a-1]):i.find(function(t){return t.id===r[a-1].id}).quantity++,h(),_(),n({title:"Thành công",message:"Bạn đã thêm sản phẩm vào giỏ hàng thành công !!"}),localStorage.setItem("data",JSON.stringify(i))})}),0<i.length?t.className="number__cart":t.className=null,t.innerHTML=i.reduce(function(t,n){return t+n.quantity},null)}var n=document.querySelector(".list__type__check1");n&&n.addEventListener("click",function(){p(r),c=null,y(),m.value="0"});var m=document.getElementById("sortPrice");function f(){switch(parseInt(m.value)){case 1:p([].concat(_toConsumableArray(r))?[].concat(_toConsumableArray(r)).sort(function(t,n){return t.price-n.price}):""),p([].concat(_toConsumableArray(c))?[].concat(_toConsumableArray(c)).sort(function(t,n){return t.price-n.price}):"");break;case 2:p([].concat(_toConsumableArray(r))?[].concat(_toConsumableArray(r)).sort(function(t,n){return n.price-t.price}):""),p([].concat(_toConsumableArray(c))?[].concat(_toConsumableArray(c)).sort(function(t,n){return n.price-t.price}):"");break;case 0:p(r),p(c)}}function y(){var t=document.querySelector(".page-item:last-child"),n=document.querySelector(".page-item:first-child");function a(t,n){u=(n-1)*o,s=n*o,d=Math.ceil(t.length/o)}t&&t.addEventListener("click",function(){null!==c&&a(c,l),a(r,l=d<++l?d:l),f()}),n&&n.addEventListener("click",function(){null!==c?(a(c,l),--l<=1&&(l=1)):a(r,l=--l<=1?1:l),f()}),function(){var t=document.querySelector(".page__number");a(null!==c?c:r,l);for(var n="",n='<li class="page-item actice"><a class="page-link">1</a></li>',e=2;e<=d;e++)n+='<li class="page-item"><a class="page-link">'+e+"</a></li>";t&&(t.innerHTML=n),document.querySelectorAll(".page__number .page-item").forEach(function(t,n){t&&t.addEventListener("click",function(){document.querySelector(".actice").classList.remove("actice"),t.classList.add("actice"),a(null!==c?c:r,l=n+1),f()})})}()}function h(){var t=document.querySelector(".dropdown__cart ul"),n=document.querySelector(".payment__cart ul"),e=document.querySelector(".dropdown__cart-total"),a=document.querySelector(".fa-shopping-cart > span");0===i.length?(a.className=null,t.className=null,e.style.setProperty("display","none","important")):(a.className="number__cart",t.className="dropdown__iconcart",e.style.setProperty("display","block","important"),a.innerHTML=i.reduce(function(t,n){return t+n.quantity},null));var r,a=i?i.map(function(t){return'\n                <li class="dropdown__cart-item" data-id='+t.id+' >\n                    <div class="dropdown__box">\n                        <div class="dropdown__image">\n                            <img src='+t.img+' alt="khong co anh"/>\n                        </div>\n                        <div class="dropdown__content">\n                            <h2>'+t.name+'<br><p class="mt-2">( x '+t.quantity+" )</p></h2>\n                            <h3>"+t.price+'<sup>đ</sup></h3>\n                        </div>\n                        <div class="dropdown__icon">\n                            <i class="fa fa-times"></i>\n                        </div>\n                    </div>\n                </li>'}):"";t&&(t.innerHTML=a.join("")),n&&(n.innerHTML=a.join("")),_(),a=document.querySelectorAll(".dropdown__icon i"),r=document.querySelector(".fa-shopping-cart > span"),a.forEach(function(t,n){t&&(t.onclick=function(){1==confirm("Bạn thự sựu muốn xoá ?")&&(i.splice(n,1),localStorage.setItem("data",JSON.stringify(i)),r.innerHTML=i.reduce(function(t,n){return t+n.quantity},null),h(),g())})})}function _(){var t=document.getElementById("totalPrice"),n=document.getElementById("total"),e=i?i.reduce(function(t,n){return t+n.price*n.quantity},0):"";t&&(t.innerHTML=e+"<sup>đ</sup>"),n&&(n.innerHTML=e+"<sup>đ</sup>")}function g(){var e,a,r,c,t=document.getElementById("cartInfo"),n=i?i.map(function(t){return"\n                <tr data-id="+t.id+">\n                    <td>\n                        <img src="+t.img+' alt="shopping cart"/>\n                    </td>\n                    <td> '+t.name+' </td>\n                    <td class="cart__price price__default">'+t.price+'<sup>đ</sup></td>\n                    <td>\n                        <input class="quantity" type="number" name="quantity" value='+t.quantity+' step="1" min=1/>\n                    </td>\n                        <td class="cart__price price__total">'+t.price*t.quantity+'<sup>đ</sup></td>\n                    <td><a class="fa fa-trash-alt"></a></td>\n                </tr>'}):"";t&&(t.innerHTML=n.join("")),0==i.length&&t&&(t.innerHTML='<tr align="center"><td colspan="6">KHÔNG CÓ SẢN PHẨM NÀO CẢ !!!</td></tr>'),e=document.querySelectorAll(".quantity"),a=document.querySelectorAll(".price__default"),r=document.querySelectorAll(".price__total"),c=document.querySelector(".fa-shopping-cart > span"),e.forEach(function(t,n){t&&(t.oninput=function(){r[n].innerHTML=e[n].value*a[n].innerText.split("").slice(0,a[n].innerText.length-1).join("")+"<sup>đ</sup>",i[n].quantity=parseInt(e[n].value),localStorage.setItem("data",JSON.stringify(i)),h(),c.innerHTML=i.reduce(function(t,n){return t+n.quantity},null)})}),document.querySelectorAll(".fa-trash-alt").forEach(function(t,n){t&&(t.onclick=function(){1==confirm("Bạn thực sư muốn xoá?")&&(i.splice(n,1),localStorage.setItem("data",JSON.stringify(i)),g(),h())})})}m&&m.addEventListener("change",f),validateForm({form:"#formPayment",errorSelector:".form-text",rules:[validateForm.isRequire("#inputName"),validateForm.isEmail("#inputEmail"),validateForm.isRequire("#inputAddress"),validateForm.isPhone("#inputPhone")]})};